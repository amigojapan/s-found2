{"images":[{"name":"food","data":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAz0lEQVRYhe2WsQ6AIAxEq4mrn+P/z36Oq4NOJYAV2itGTbjRoPd6FgqRX4fn5dFrvm+LC2JoYE5ERNO8Qt/zJuAWmkBSPQtJAQEQzVEIK0DRHIH4VQ+oqmdpU+AF1X1sMc8gVAABAjGyKgIbpIhMUYPmwffuHzVPI646fl5rkiZplBpSswvgNO6qtgIEkCe24W8OIqgXNCmoesDTiDWIz+6CV88By8hNhIzqHKB008klwmugYohkGPFiwdB1eZWAGOIyDRsYWoCe9Onq6tLpBH7UXjxT7mvGAAAAAElFTkSuQmCC"},{"name":"snake_segment","data":"data:image/png;base64,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"}],"background_":"not set","pages":[{"pagename":"main"}],"game_objects":[{"frames":[],"name":"food"},{"frames":[],"name":"snake_segment"}],"JScode":"var maxRow = 13;\nvar maxCol = 19;\nvar cellSize = 32;\nvar snakePositions = [[5, 5], [5, 4], [5, 3]]; // Initial snake positions: [row, col]\nvar currentDirection = 'right';\nvar desiredDirection = 'right';\nvar foodPosition = [];\nvar gameOver = false;\nvar frameCounter = 0;\nvar foodClone = null;\n\nfunction ON_STARTUP() {\n  // Destroy existing snake segments\n  current_clone = null;\n  set_current_sprite_name('snake_segment');\n  var game_object = find_sprite_object_by_name(current_sprite_name);\n  for (var clone in game_object.clones) {\n    current_clone = clone;\n    hide_current_sprite();\n    destroy_current_sprite();\n  }\n\n  // Create initial snake segments\n  for (var i = 0; i < snakePositions.length; i++) {\n    clone_sprite();\n    set_x_to(snakePositions[i][1] * cellSize);\n    set_y_to(snakePositions[i][0] * cellSize);\n    //show_current_sprite();\n  }\n\n  // Create food sprite\n  set_current_sprite_name('food');\n  //clone_sprite();\n  place_food();\n  console.log(\"Food initialized at\", foodPosition);\n}\n\nfunction place_food() {\n  while (true) {\n    // Constrain food to rows 1-18, cols 1-20 to avoid edges\n    var row = Math.floor(Math.random() * (maxRow - 2)) + 1; // 1 to 18\n    var col = Math.floor(Math.random() * (maxCol - 2)) + 1; // 1 to 20\n    if (!snakePositions.some(pos => pos[0] === row && pos[1] === col)) {\n      foodPosition = [row, col];\n      set_current_sprite_name('food');\n      current_clone = foodClone; // Reuse food clone\n      set_x_to(col * cellSize);\n      set_y_to(row * cellSize);\n      show_current_sprite();\n      console.log(\"Food placed at\", foodPosition);\n      break;\n    }\n  }\n}\n\nfunction EACH_FRAME() {\n  if (!gameOver) {\n    frameCounter++;\n    if (frameCounter % 5 === 0) { // Move every 5 frames\n      perform_move();\n    }\n  }\n}\nfunction perform_move() {\n  // Update direction if not reversing\n  if ((currentDirection === 'right' && desiredDirection !== 'left') ||\n      (currentDirection === 'left' && desiredDirection !== 'right') ||\n      (currentDirection === 'up' && desiredDirection !== 'down') ||\n      (currentDirection === 'down' && desiredDirection !== 'up')) {\n    currentDirection = desiredDirection;\n  }\n\n  // Calculate new head position\n  var head = snakePositions[0];\n  var dRow = 0, dCol = 0;\n  if (currentDirection === 'right') dCol = 1;\n  else if (currentDirection === 'left') dCol = -1;\n  else if (currentDirection === 'up') dRow = -1;\n  else if (currentDirection === 'down') dRow = 1;\n  var newRow = head[0] + dRow;\n  var newCol = head[1] + dCol;\n  var newHead = [newRow, newCol];\n\n  // Check boundaries\n  if (newRow < 0 || newRow >= maxRow || newCol < 0 || newCol >= maxCol) {\n    gameOver = true;\n    console.log(\"Game over: Out of bounds at\", newHead);\n    return;\n  }\n\n  // Check collision with self\n  if (snakePositions.slice(1).some(pos => pos[0] === newRow && pos[1] === newCol)) {\n    gameOver = true;\n    console.log(\"Game over: Self collision at\", newHead);\n    return;\n  }\n\n  // Check food collision\n  var growing = false;\n  if (newRow === foodPosition[0] && newCol === foodPosition[1]) {\n    growing = true;\n    place_food();\n  }\n\n  // Update snake positions\n  if (growing) {\n    snakePositions = [newHead].concat(snakePositions);\n  } else {\n    snakePositions = [newHead].concat(snakePositions.slice(0, -1));\n  }\n\n  // Destroy existing snake segments\n  const myFunction = function() {\n  \t\tdestory_current_clone();\n  };\n  for_each_clone(myFunction);\n  \n  // Recreate snake segments\n  for (var i = 0; i < snakePositions.length; i++) {\n    set_current_sprite_name('snake_segment');\n    clone_sprite();\n    set_x_to(snakePositions[i][1] * cellSize);\n    set_y_to(snakePositions[i][0] * cellSize);\n    show_current_sprite();\n    console.log(\"Placed segment at\", snakePositions[i]);\n  }\n}\n\n\nfunction LEFT_KEY_PRESSED() {\n  desiredDirection = 'left';\n}\n\nfunction RIGHT_KEY_PRESSED() {\n  desiredDirection = 'right';\n}\n\nfunction UP_KEY_PRESSED() {\n  desiredDirection = 'up';\n}\n\nfunction DOWN_KEY_PRESSED() {\n  desiredDirection = 'down';\n}"}