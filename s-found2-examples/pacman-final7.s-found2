{"images":[{"name":"ghost","data":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAIMElEQVR4nO2ae2xT1xnAf9fBcZwQ00BiIJRQXlkKAQIRdOFeOhBdJrruwbq2QutGEISR0Uh0qwdTp0Kmtdt617Uag1SwsQ0Vpq7i0dGxDVGxUZuo7XgsykpnBBlJoYkhUEJKHnZ894fvNY5zbV+/8sfkn2T53vP4vvMdf+ec75xjyJAhQ4YMGTJkyJAhQ4YwFEVJ6Wex+GJxqmUm8wEwjVRnipK8HbgiSvJzI6XTCCPSAaIkPw9sVF+rR0KnUUalW4EoyfuBVSFJ5enWGQ9p9QBRkl9gqPEAR9Op0yiCIAiQJg8QJXkicBGwAkzLMTdd6vNWqdmvpkNnvCiKogiCkHoPECX518BVVOMX5uc0OUoKqkKKuFOtMxkS8gBRkhUDxW69MqNojMUkVIWljwU6EtGbDhL1gL2RMqwm4YNfzCiisdQ+xmIS9IqMT1BnWkjIA1xOx2pRkucA8wFemVFEiLGzYlRfDZxIRG860P2JNLRoKRracKiZYPvwAVtOWaRydW7PSeBBAJfTMUyvKMl7gDWh6oFOl9MxMWYjEkQQhOQ7AIbMCb4dM+2j9Dz/aNenZ450fbpAfTW7nA5fWN2o6HVashjuAFGS24DJarLF5XQMhJcVJdlPZI/qbyy1W+rcHu39d0BNSH5rQ331VL2KP9pxvG3Q7y8JSSpyOR3Xo7XbKPEsg5NDnvv1CricDhNQCnysk21RvzvV7xq1Ade3rF/Gd2seLNGpA8BzGx8q2bJ+GXnWbC3pmijJFgh4j1EPikRMDxAl2QT4wssacUlRklegRn6NpXYu9Xo75fab4wFyrdnNm9ctnQuBwR4u7KXfnjzT3dOnDRmsFrMye+Z44Z8tHwX1hxjf6nI6psVqTzhGPWCeTvu03rfFqJuvPSjANKs5uATe6R2Ys/uNd5v0jO/t89Ld07cgVxjky9kBb+/t9waN1/Srj35Ad/gYwUgH/CRK3i1Rkuui5L+ufns0I9dNHHNBy/yo41bVBxc6hkWGP9/zj1aAffn/Zk3OVQ7amvlDfssw4Y8WjT5XP+medgBRkt+NYYcuRjrgCzHyd+qNQ1GSg5uexlK7XXtekG+ZubPUTs0Emxvgj39tLt26/Rjvt7QHLfQN+oO/6MruuazPXqysul1OrjDIcvPNoI4D13oqZuVlTwG8wCIDtgwj2b1AtAloBcBXC0efA9hy6fq5Orfn1Hfcnr4TN+80i8VjPrN6gu28VvitE+fLr93ouR0qoMMfmPjePFwnvHVko/+OksVT1vYhSrb9t+u9xlK7GYwvqaEk2wECDJ8QRUnepT0fvt5TUef2cMvnrwAWAzlvXOuZW3um/TefteXcDwSH0LiCvPxQORNMd1fbgoJcEwQ84sd5F4PpnQODiwB+Nr1Q030lHgOS6YBuwBphNajVSbux7IHpp4FWAp6zts7teRN4EWDTt5b0m4SgqHad+rxz8hkAPP7sIel1bg+bLwZDg+J4jIjaAaIk50TJfsbldPTp1NHdX2yrrx67dNH0ygP7a6cWFOT+RU3+CoGVoqtgjNUSlLHgvg6AbmUUwEBLy9WbEFi2AH7ZO5lik244AtGH5TBieUClTtp69XuXTh5qiDtO9YwjAPfkW08LgDk7i4LCPDY9KT0cWqehvnpc6Hu1WLoQoOb2LOWQrTn72xv2FQBcvfpJsMyK7C7t8UshugU1IDNMrMKWkOfHVAW7gS4AUZJ1d3Uup+NGaOOerllSCfC5lXePA2fPGN8EfLildllE5QoIvsA04xclmcef2B3MqzLfAqDYbnsWOK8rwAAJb4a0GTdSRChKcglwGTjbUF89/94ZhZRVTuLvB1vweQdjNuyd061nj5+6MB/gkK2Zld1zh+Q/bW3j5d4SrBZzy9qvL5zyq32n8oEpLqejLaZwlWSPxB6BqEvPZYCG+ur5AGWVkwAMGQ+wpHLqfO35uHes8qSlY8gG6EFzYDj09ntnF40dra0elw23XiXhDnA5HX9GnXBESW5NVE40vr9uKQA7eu8VHrV4Cg/Zmnnc0unZOfo/dPnNAGSZTG0A1hzz8FDRAEnFASETzn2iJHu1dFGSpwKYTMIVgOKpYxOSr+4ALwHBIbDK0mmfaOrnqDew7mdlCYUAm2uXlYfqNkrSp8LqHNAFjFI3SGtQt7tPfUMsAJg8szBh+Q311dPKptmbINAJhwaKONBv52B/EQDPblieB0Mms5p45KfkWNzldBQCh9XXPcAPAHKt5lyA0ycuRqhpjFVfrKgisOtjb99EXuufEK24GI/slF2MuJyOlRCcFM0AP90VXCUV19fKkzrSaqivNinA841v4/MNsvLz5cwr0w36hgVn0Uj5xYg6JL4XlizUrt7bdPz1fwHw0BPzyM23DKsbE0Xhh3XL2VZfHcl4gL/FIzJdl6O/B14anZt9zrF2aYWaVgUB4wEWP1xG950bvHdEN+wfhsLdUDhSvsr+eBqalstRl9PRBdBzZ6AiWjlbrvHVQSBgpPYJ54VX33aH6jZK2q/Ho+EbHHa4HJVok8iAd7A0kTak5F4gElqU2FA/9D8RWVkmFEXB749Pvt75IcDW7ceA+O8O0nI7HMb7cLeBGoOD/riNh7vDIJSt24/FHf6Gy4xIsh4AQ2+NGuqrUzrktm4/5kMdxoncHKXsaiwWoiRvAl4OS/Y/svR+08I5k/H7FUz6N8kA9A/4eO1PZ2j7+BO97ITuBGAEOwCCJ0UDxPC6OFCAbO2OMRFGtAMiIUpyFoGDlw3AYwT+RGUGsoBvAmcBt8vpSHljosUVGTJkyJAhQ4YMGTL8n/M/3tZE4qGe1bcAAAAASUVORK5CYII="},{"name":"wall","data":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABGklEQVRYheWXwQ3DMAhFSdWDd8hS2aIzZYss5R18Sy+N5VAM39htDvlSpCoy8AwmuER31+Sw2Uf6RBfnoGtc1IWveWvyjwDsVlADRo1hAbiDoxAaQHdwBKIGAAVn9VbPRw1CAoCDJ/YuOCAenuBefXyf2vhpGZVp/gUcz8BX8ESUH17z0QBN6V/jQoHo9CD2vAxmCQBnXVIB1rhQaDgDUoksGzMD6C6ltiQiCvOm+lABWjqAZwu1qwLwHVk7QYJJUtvwH+rqglItc6EUnwWnbwFyBo410lyQ7Pg8MNsQkXT6UwGh6fIzwAEmz/de2qn0ThrHXRcSwXmWVXsLwAVRk+dKNgyi51LaDTHiWp4hjh9X/DGpwgz0eWO9ASW2gZEC08noAAAAAElFTkSuQmCC"},{"name":"pellet","data":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAz0lEQVRYhe2WsQ6AIAxEq4mrn+P/z36Oq4NOJYAV2itGTbjRoPd6FgqRX4fn5dFrvm+LC2JoYE5ERNO8Qt/zJuAWmkBSPQtJAQEQzVEIK0DRHIH4VQ+oqmdpU+AF1X1sMc8gVAABAjGyKgIbpIhMUYPmwffuHzVPI646fl5rkiZplBpSswvgNO6qtgIEkCe24W8OIqgXNCmoesDTiDWIz+6CV88By8hNhIzqHKB008klwmugYohkGPFiwdB1eZWAGOIyDRsYWoCe9Onq6tLpBH7UXjxT7mvGAAAAAElFTkSuQmCC"},{"name":"pacman","data":"data:image/png;base64,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"},{"name":"ghost2","data":"data:image/png;base64,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"}],"background_":"not set","pages":[{"pagename":"main"}],"game_objects":[{"frames":[],"name":"ghost"},{"frames":[],"name":"wall"},{"frames":[],"name":"pellet"},{"frames":[],"name":"pacman"},{"frames":[],"name":"ghost2"}],"JScode":"//main\n\nvar maze, cellSize, walls, pellets, ghosts, direction, desiredDirection, score, lives, collisionDirection, saved_x, saved_y;\nvar ghostDirection, desiredDirectionGhost1, ghostDirection2, desiredDirectionGhost2;\n\nfunction rotateMatrix(matrix) {\n  const rows = matrix.length;\n  const cols = matrix[0].length;\n  const rotatedMatrix = Array(cols).fill(null).map(() => Array(rows));\n  for (let i = 0; i < rows; i++) {\n    for (let j = 0; j < cols; j++) {\n      rotatedMatrix[j][rows - 1 - i] = matrix[i][j];\n    }\n  }\n  return rotatedMatrix;\n}\n\nfunction ON_STARTUP() {\n  // Define the maze: 1 = wall, 0 = empty path, 2 = pellet\n  maze = [\n    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],\n    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],\n    [1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1],\n    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],\n    [1,2,1,2,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1],\n    [1,2,1,2,1,1,2,2,2,2,2,2,2,1,1,2,1,2,1],\n    [1,2,1,2,1,1,2,1,1,1,1,1,2,1,1,2,1,2,1],\n    [1,2,1,2,1,1,2,1,1,1,1,1,2,1,1,2,1,2,1],\n    [1,2,1,2,1,1,2,2,2,2,2,2,2,1,1,2,1,2,1],\n    [1,2,1,2,1,1,1,1,1,2,1,1,1,1,1,2,1,2,1],\n    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],\n    [1,2,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,2,1],\n    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],\n    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]\n  ];\n  maze = rotateMatrix(maze);\n  cellSize = 34;\n\n  // Create wall\n  for (var row = 0; row < maze.length; row++) {\n    for (var col = 0; col < maze[row].length; col++) {\n      if (maze[row][col] == 1) {\n        set_current_sprite_name('wall');\n        clone_sprite();\n        set_x_to(row * cellSize);\n        set_y_to(col * cellSize);\n      }\n    }\n  }\n\n  // Create pellets\n  for (var row = 0; row < maze.length; row++) {\n    for (var col = 0; col < maze[row].length; col++) {\n      if (maze[row][col] == 2) {\n        set_current_sprite_name('pellet');\n        clone_sprite();\n        set_x_to(row * cellSize);\n        set_y_to(col * cellSize);\n      }\n    }\n  }\n\n  // Create Pac-Man\n  set_current_sprite_name(\"pacman\");\n  set_x_to(cellSize * 1);\n  set_y_to(cellSize * 1);\n  show_current_sprite();\n\n  // Create ghost1\n  set_current_sprite_name(\"ghost\");\n  set_x_to(cellSize * 1);\n  set_y_to(cellSize * 10);\n  show_current_sprite();\n\n  // Create ghost2\n  set_current_sprite_name(\"ghost2\");\n  set_x_to(cellSize * 1);\n  set_y_to(cellSize * 12);\n  show_current_sprite();\n\n  // Initialize game state\n  direction = 'stop';\n  desiredDirection = 'stop';\n  ghostDirection = 'stop';\n  desiredDirectionGhost1 = 'stop';\n  ghostDirection2 = 'stop';\n  desiredDirectionGhost2 = 'stop';\n  score = 0;\n  lives = 3;\n\n  // Start the ghost1 movement timer\n  startTimer();\n}\n\nfunction moveCharater(charaterName) {\n  set_current_sprite_name(charaterName);\n  var x = get_x_value();\n  var y = get_y_value();\n  \n  // Find the nearest grid cell center\n  var nearestRow = Math.round(x / cellSize);\n  var nearestCol = Math.round(y / cellSize);\n  var centerX = nearestRow * cellSize;\n  var centerY = nearestCol * cellSize;\n  var tolerance = 5;\n\n  // Check if character is near a grid center for direction changes\n  if (Math.abs(x - centerX) < tolerance && Math.abs(y - centerY) < tolerance) {\n    if (charaterName == \"ghost\") {\n      if (desiredDirectionGhost1 != ghostDirection) {\n        var canTurn = false;\n        if (desiredDirectionGhost1 == 'right' && nearestRow + 1 < maze.length && maze[nearestRow + 1][nearestCol] != 1) {\n          canTurn = true;\n        } else if (desiredDirectionGhost1 == 'left' && nearestRow - 1 >= 0 && maze[nearestRow - 1][nearestCol] != 1) {\n          canTurn = true;\n        } else if (desiredDirectionGhost1 == 'up' && nearestCol - 1 >= 0 && maze[nearestRow][nearestCol - 1] != 1) {\n          canTurn = true;\n        } else if (desiredDirectionGhost1 == 'down' && nearestCol + 1 < maze[0].length && maze[nearestRow][nearestCol + 1] != 1) {\n          canTurn = true;\n        }\n        if (canTurn) {\n          ghostDirection = desiredDirectionGhost1;\n        }\n      }\n      // Check if current direction is still valid\n      var canContinue = true;\n      if (ghostDirection == 'right' && (nearestRow + 1 >= maze.length || maze[nearestRow + 1][nearestCol] == 1)) {\n        canContinue = false;\n      } else if (ghostDirection == 'left' && (nearestRow - 1 < 0 || maze[nearestRow - 1][nearestCol] == 1)) {\n        canContinue = false;\n      } else if (ghostDirection == 'up' && (nearestCol - 1 < 0 || maze[nearestRow][nearestCol - 1] == 1)) {\n        canContinue = false;\n      } else if (ghostDirection == 'down' && (nearestCol + 1 >= maze[0].length || maze[nearestRow][nearestCol + 1] == 1)) {\n        canContinue = false;\n      }\n      if (!canContinue) {\n        ghostDirection = 'stop';\n      }\n    } else if (charaterName == \"ghost2\") {\n      // Get Pac-Man's position\n      set_current_sprite_name(\"pacman\");\n      var pacmanX = get_x_value();\n      var pacmanY = get_y_value();\n      set_current_sprite_name(\"ghost2\");\n      \n      // Evaluate possible directions\n      var possibleDirections = [];\n      var distances = [];\n      if (nearestRow + 1 < maze.length && maze[nearestRow + 1][nearestCol] != 1) {\n        possibleDirections.push('right');\n        var newX = (nearestRow + 1) * cellSize;\n        var newY = nearestCol * cellSize;\n        distances.push(Math.sqrt((newX - pacmanX) ** 2 + (newY - pacmanY) ** 2));\n      }\n      if (nearestRow - 1 >= 0 && maze[nearestRow - 1][nearestCol] != 1) {\n        possibleDirections.push('left');\n        var newX = (nearestRow - 1) * cellSize;\n        var newY = nearestCol * cellSize;\n        distances.push(Math.sqrt((newX - pacmanX) ** 2 + (newY - pacmanY) ** 2));\n      }\n      if (nearestCol - 1 >= 0 && maze[nearestRow][nearestCol - 1] != 1) {\n        possibleDirections.push('up');\n        var newX = nearestRow * cellSize;\n        var newY = (nearestCol - 1) * cellSize;\n        distances.push(Math.sqrt((newX - pacmanX) ** 2 + (newY - pacmanY) ** 2));\n      }\n      if (nearestCol + 1 < maze[0].length && maze[nearestRow][nearestCol + 1] != 1) {\n        possibleDirections.push('down');\n        var newX = nearestRow * cellSize;\n        var newY = (nearestCol + 1) * cellSize;\n        distances.push(Math.sqrt((newX - pacmanX) ** 2 + (newY - pacmanY) ** 2));\n      }\n      \n      // Choose direction with minimum distance\n      if (possibleDirections.length > 0) {\n        var minDistance = Math.min(...distances);\n        var minIndex = distances.indexOf(minDistance);\n        desiredDirectionGhost2 = possibleDirections[minIndex];\n        ghostDirection2 = desiredDirectionGhost2;\n      } else {\n        ghostDirection2 = 'stop';\n      }\n      \n      // Check if current direction is still valid\n      var canContinue = true;\n      if (ghostDirection2 == 'right' && (nearestRow + 1 >= maze.length || maze[nearestRow + 1][nearestCol] == 1)) {\n        canContinue = false;\n      } else if (ghostDirection2 == 'left' && (nearestRow - 1 < 0 || maze[nearestRow - 1][nearestCol] == 1)) {\n        canContinue = false;\n      } else if (ghostDirection2 == 'up' && (nearestCol - 1 < 0 || maze[nearestRow][nearestCol - 1] == 1)) {\n        canContinue = false;\n      } else if (ghostDirection2 == 'down' && (nearestCol + 1 >= maze[0].length || maze[nearestRow][nearestCol + 1] == 1)) {\n        canContinue = false;\n      }\n      if (!canContinue) {\n        ghostDirection2 = 'stop';\n      }\n    } else { // Pac-Man\n      if (desiredDirection != direction) {\n        var canTurn = false;\n        if (desiredDirection == 'right' && nearestRow + 1 < maze.length && maze[nearestRow + 1][nearestCol] != 1) {\n          canTurn = true;\n        } else if (desiredDirection == 'left' && nearestRow - 1 >= 0 && maze[nearestRow - 1][nearestCol] != 1) {\n          canTurn = true;\n        } else if (desiredDirection == 'up' && nearestCol - 1 >= 0 && maze[nearestRow][nearestCol - 1] != 1) {\n          canTurn = true;\n        } else if (desiredDirection == 'down' && nearestCol + 1 < maze[0].length && maze[nearestRow][nearestCol + 1] != 1) {\n          canTurn = true;\n        }\n        if (canTurn) {\n          direction = desiredDirection;\n        }\n      }\n      // Check if current direction is still valid\n      var canContinue = true;\n      if (direction == 'right' && (nearestRow + 1 >= maze.length || maze[nearestRow + 1][nearestCol] == 1)) {\n        canContinue = false;\n      } else if (direction == 'left' && (nearestRow - 1 < 0 || maze[nearestRow - 1][nearestCol] == 1)) {\n        canContinue = false;\n      } else if (direction == 'up' && (nearestCol - 1 < 0 || maze[nearestRow][nearestCol - 1] == 1)) {\n        canContinue = false;\n      } else if (direction == 'down' && (nearestCol + 1 >= maze[0].length || maze[nearestRow][nearestCol + 1] == 1)) {\n        canContinue = false;\n      }\n      if (!canContinue) {\n        direction = 'stop';\n      }\n    }\n  }\n\n  // Move the character every frame\n  var speed = 10;\n  if (charaterName == \"ghost\") {\n    if (ghostDirection == 'right') {\n      set_x_to(get_x_value() + speed);\n    } else if (ghostDirection == 'left') {\n      set_x_to(get_x_value() - speed);\n    } else if (ghostDirection == 'up') {\n      set_y_to(get_y_value() - speed);\n    } else if (ghostDirection == 'down') {\n      set_y_to(get_y_value() + speed);\n    }\n  } else if (charaterName == \"ghost2\") {\n    speed = 3.5;\n    if (ghostDirection2 == 'right') {\n      set_x_to(get_x_value() + speed);\n    } else if (ghostDirection2 == 'left') {\n      set_x_to(get_x_value() - speed);\n    } else if (ghostDirection2 == 'up') {\n      set_y_to(get_y_value() - speed);\n    } else if (ghostDirection2 == 'down') {\n      set_y_to(get_y_value() + speed);\n    }\n  } else { // Pac-Man\n    speed = 10;\n    if (direction == 'right') {\n      set_x_to(get_x_value() + speed);\n    } else if (direction == 'left') {\n      set_x_to(get_x_value() - speed);\n    } else if (direction == 'up') {\n      set_y_to(get_y_value() - speed);\n    } else if (direction == 'down') {\n      set_y_to(get_y_value() + speed);\n    }\n  }\n}\n\nfunction EACH_FRAME() {\n  moveCharater(\"pacman\");\n  moveCharater(\"ghost\");\n  moveCharater(\"ghost2\");\n\n  // Check for pellet collection\n  current_clone = null;\n  set_current_sprite_name(\"pellet\");\n  set_target_sprite_name(\"pacman\");\n  const myFunction = function() {\n    if (is_colliding_with_target()) {\n      destroy_current_sprite();\n      score += 10;\n    }\n  };\n  for_each_clone(myFunction);\n\n  // Check for ghost collisions (ghost)\n  set_current_sprite_name(\"ghost\");\n  set_target_sprite_name(\"pacman\");\n  if (is_colliding_with_target()) {\n    lives--;\n    if (lives <= 0) {\n      //alert(\"Game over\");\n    } else {\n      set_current_sprite_name(\"pacman\");\n      set_x_to(cellSize * 1);\n      set_y_to(cellSize * 1);\n      direction = 'stop';\n      desiredDirection = 'stop';\n    }\n  }\n\n  // Check for ghost collisions (ghost2)\n  set_current_sprite_name(\"ghost2\");\n  set_target_sprite_name(\"pacman\");\n  if (is_colliding_with_target()) {\n    lives--;\n    if (lives <= 0) {\n      alert(\"Game over\");\n    } else {\n      set_current_sprite_name(\"pacman\");\n      set_x_to(cellSize * 1);\n      set_y_to(cellSize * 1);\n      direction = 'stop';\n      desiredDirection = 'stop';\n    }\n  }\n}\n\nfunction LEFT_KEY_PRESSED() {\n  desiredDirection = 'left';\n}\n\nfunction RIGHT_KEY_PRESSED() {\n  desiredDirection = 'right';\n}\n\nfunction UP_KEY_PRESSED() {\n  desiredDirection = 'up';\n}\n\nfunction DOWN_KEY_PRESSED() {\n  desiredDirection = 'down';\n}\n\nlet timerVariable;\nfunction getRandomIntInclusive(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nfunction startTimer() {\n  timerVariable = setInterval(function() {\n    let randomNumber = getRandomIntInclusive(1, 4);\n    switch(randomNumber) {\n      case 1:\n        desiredDirectionGhost1 = \"up\";\n        break;\n      case 2:\n        desiredDirectionGhost1 = \"down\";\n        break;\n      case 3:\n        desiredDirectionGhost1 = \"left\";\n        break;\n      case 4:\n        desiredDirectionGhost1 = \"right\";\n        break;\n    }\n  }, 3000);\n}\n\nfunction stopTimer() {\n  clearInterval(timerVariable);\n}"}